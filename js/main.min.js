!function(){"use strict";angular.module("app",["ui.router","ngMaterial","base64"]).run(function(){console.log("App is running.")})}(),function(){"use strict";function e(e,t){t.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"layout/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("repositories",{url:"/repositories",templateUrl:"layout/repositories/repositories.html",controller:"RepositoriesController",controllerAs:"vm",params:{userName:null,basic:null,id:null,token:null},resolve:{userRepos:["$stateParams","http",function(e,t){return e.userName?t.getRepoByUserName(e.userName,e.token):""}]}}).state("reports",{url:"/reports",templateUrl:"layout/reports/reports.html",controller:"ReportsController",controllerAs:"vm",params:{userName:null,repoName:null,basic:null,id:null,token:null},resolve:{issues:["$stateParams","http",function(e,t){return t.getIssuesByRepoName(e.userName,e.repoName,e.token)}],commits:["$stateParams","http",function(e,t){return t.getCommitsByRepoName(e.userName,e.repoName,e.token)}]}})}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(s){var i="https://api.github.com";return{getRepoByUserName:function(e,t){var o=i+"/users/"+e+"/repos",n={method:"GET",headers:{Authorization:t,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},params:{type:"all",per_page:"200"}};return s.get(o,n)},getCommitsByRepoName:function(e,t,o){var n=i+"/repos/"+e+"/"+t+"/commits",r={method:"GET",headers:{Authorization:o,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},params:{per_page:"200"}};return s.get(n,r)},getIssuesByRepoName:function(e,t,o){var n=i+"/repos/"+e+"/"+t+"/issues",r={method:"GET",headers:{Authorization:o,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return s.get(n,r)},getAuthorization:function(e){var t={method:"GET",headers:{Authorization:e,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return s.get("https://api.github.com/authorizations",t)},deleteAuthorization:function(e,t){var o=i+"/authorizations/"+t,n={method:"DELETE",headers:{Authorization:e,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return-1!==t?s.delete(o,n):void 0},postAuthorization:function(e,t){var o={scopes:["public_repo"],note:t},n={method:"POST",headers:{Authorization:e,Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}};return s.post("https://api.github.com/authorizations",o,n)}}}angular.module("app").factory("http",e),e.$inject=["$http"]}(),function(){"use strict";function e(o,t,n,e){var r=this;r.user={},r.login=function(){var t="basic "+e.encode(r.user.login+":"+r.user.password);if(r.form.$invalid)return;n.getAuthorization(t).then(function(e){var t=r.checkArray(e.data,r.note);return t},function(e){console.error(e),r.showMessage("Wrong login or password.")}).then(function(e){return n.deleteAuthorization(t,e)}).then(function(){return n.postAuthorization(t,r.note)}).then(function(e){console.log("Go to repositories."),o.go("repositories",{basic:t,id:e.data.id,token:"token "+e.data.token})}).catch(function(e){console.log(e)})},r.showMessage=function(e){r.message=e,t(function(){r.message=""},5e3)},r.checkArray=function(e,t){var o=-1;return e.forEach(function(e){e.note===t&&(o=e.id)}),o},r.note="Sing-on app by MyrPasko"}angular.module("app").controller("LoginController",e),e.$inject=["$state","$timeout","http","$base64"]}(),function(){"use strict";function e(o,e,t,n,r){var s=this;s.chooseRepo=function(e){var t={userName:e.owner.login,repoName:e.name,basic:n.basic,id:n.id,token:n.token};console.log("Go to reports"),o.go("reports",t)},s.getRepos=function(){e.getRepoByUserName(s.searchField,n.token).then(function(e){s.listOfRepos=e.data,s.userName=s.searchField,s.searchField=""},function(e){console.log(e),s.listOfRepos="",s.showMessage("User was not found.")})},s.listOfRepos=t.data||"",s.logOut=function(){e.deleteAuthorization(n.basic,n.id).then(function(e){console.log(e),o.go("login")})},s.searchField="",s.showMessage=function(e){s.message=e,r(function(){s.message=""},5e3)},s.sortparam="name",s.userName=n.userName||""}angular.module("app").controller("RepositoriesController",e),e.$inject=["$state","http","userRepos","$stateParams","$timeout"]}(),function(){"use strict";function e(t,e,o,n,r){var s=this;s.checkBox={commits:{committer:!0,date:!0,description:!0},issues:{name:!0,user:!0,date:!0,status:!0}},s.commits=o.data,s.commitsSortParam="commit.author.name",s.goToRepos=function(){var e={userName:n.userName,basic:n.basic,id:n.id,token:n.token};console.log("Go back to repositories."),t.go("repositories",e)},s.issues=e.data,s.issuesSortParam="title",s.logOut=function(){r.deleteAuthorization(n.basic,n.id).then(function(e){console.log(e),t.go("login")})},s.makeInvisible=function(e){return e?"visible":"invisible"},s.repoName=n.repoName}angular.module("app").controller("ReportsController",e),e.$inject=["$state","issues","commits","$stateParams","http"]}();